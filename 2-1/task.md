# 开发脚手架及封装自动化构建工作流

## 一、 简答题

### 1、谈谈你对工程化的初步认识，结合你之前遇到过的问题说出三个以上工程化能够解决问题或者带来的价值。

**答**: 

初步认识：一切以提高效率，降低成本，质量保证为目的的手段都叫工程化

解决的问题：

- 传统语言或语法的弊端（需要使用ES6 + 或 less/sass/postcss之类的一些运行环境不能直接支持的语法）
- 无法使用模块化/组件化 （想要使用模块化放肆提高项目的可维护性，但运行环境不支持）
- 重复的机械式工作（包括复制粘贴项目基础代码，手动压缩，手动上传等问题）
- 代码风格不统一的问题
- 依赖后端服务接口支持（部分功能开发时需等待后端接口完成）

### 2、你认为脚手架除了为我们创建项目结构，还有什么更深的意义？

**答**: 
脚手架除了可以提供项目的基础结构外，还可以提供项目的规范和约定（相同的组织结构，相同的开发范式，相同的模块依赖，相同的工具配置，相同的基础代码）

## 二、 编程题

### 1、概述脚手架实现的过程，并使用 NodeJS 完成一个自定义的小型脚手架工具

### 2、尝试使用 Gulp 完成项目的自动化构建

### 3、使用 Grunt 完成项目的自动化构建

 2-3 题项目基础代码下载地址：

百度网盘：https://pan.baidu.com/s/1AyGApMTFEfCeGfQBdykOGg 提取码: bw3r

## 说明：

本次作业中的编程题要求大家完成相应代码后（二选一）

1.  简单录制一个小视频介绍一下实现思路，并演示一下相关功能。

2.  提交一个项目说明文档，要求思路流程清晰。

最终将录制的视频或说明文档和代码统一提交至作业仓库。

#### 概述脚手架实现过程 
- 在package.json 中添加一个bin 字段，指向脚手架的入口文件 cli.js
- 在cli.js 的头部添加 #!/usr/bin/env node, 来表示这个是脚手架入口文件
- 在脚手架中添加模板文件，在cli.js 中的添加复制模板到当前目录的功能

#### 用gulp 实现自动化/ 用grunt 实现自动化


** 实现步骤**
首先需要分操作，分为在开发中运行，和打包上线运行

**开发中：** 
- 使用模板编译html
- 使用babel 编译es6
-  编译scss/less 
-  热更新，文件改变自动刷新浏览器

**打包上线：**
- 清除上次打包的文件
- 使用模板编译html
- 使用babel 编译es6
-  编译scss/less 
-  复制静态文件
-  替换html中的块命令，把html 中node_module 的指向打包成文件
-  压缩文件(js, css, html, image)
-  修改html 引用压缩后的文件


**记录要点 **
- 使用browser-sync 的时候，发现改变文件，无法自动刷新浏览器时。
   - gulp 中： 需要通过.pipe(bs.reload({stream: true})) 把输出流送到浏览器
   
   - grunt 中与watch 配合时，需要监听的时dist 文件，不是src 文件夹的文件，
          
          bsFiles: {
              src : [
                  'dist/**/*'
              ]
          }
- 这里遇到一个卡了很久的点，怪我无知，一直都设置了vpn ,当时gulp-imagemin 和 grunt-contrib-imagemin 都一直下载不下来，
需要对npm  设置proxy, 如下，在.npmrc 中设置，这里是我的vpn 的地址
proxy=http://127.0.0.1:10809
https-proxy=http://127.0.0.1:10809
- grunt-usemin 的使用 是需要联合多条命令一起使用的， 单条指令无法成功（useminPrepare, concat, cssmin, uglify）,










